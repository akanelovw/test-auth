# TEST AUTH

## Описание проекта

В данном проекте реализована **собственная система аутентификации и разграничения прав доступа** без использования стандартных механизмов Django.

Цель проекта — продемонстрировать понимание:
- JWT-аутентификации
- ролевой модели доступа
- контроля доступа к ресурсам (401 / 403)
- централизованного управления правилами доступа

---

## 1. Аутентификация

Аутентификация реализована с использованием **JWT**.

### Основные возможности:
- регистрация пользователя
- логин (получение JWT)
- логаут (добавление токена в blacklist)
- проверка токена при каждом запросе

JWT передаётся через заголовок:

```
Authorization: Bearer <token>
```

Если токен:
- отсутствует или невалиден → **401 Unauthorized**
- находится в blacklist → **401 Unauthorized**

---

## 2. Ролевая модель

В системе используются следующие роли:

### User
- может просматривать **только свой профиль**
- может редактировать **только свои данные**
- может удалить (деактивировать) **только себя**

### Admin
- имеет полный доступ ко всем пользователям
- может управлять правилами доступа
- имеет доступ ко всем ресурсам системы

---

## 3. Система разграничения прав доступа

В проекте реализована **собственная permission-система**.

Права описываются в виде словаря:

```
PERMISSIONS = {
    "user": {
        "user_profile": ["read", "update", "delete"]
    },
    "admin": {
        "*": ["*"]
    }
}
```

### Принцип работы:
- пользователь определяется по JWT
- роль извлекается из токена
- проверяется право на ресурс и действие

Если:
- пользователь не аутентифицирован → **401**
- пользователь аутентифицирован, но не имеет доступа → **403**
- доступ разрешён → ресурс возвращается

---

## 5. API управления правилами доступа

Реализовано API для управления правилами доступа.

### Доступ:
- только пользователи с ролью **admin**

Администратор может:
- получить текущую конфигурацию permissions
- изменить правила доступа

---

## 6. Mock-объекты бизнес-приложения

Для демонстрации работы системы реализованы **вымышленные бизнес-объекты** без создания таблиц в БД.

### Примеры mock-ресурсов:
- Reports
- Documents
- Requests

Пример mock-данных:

```
MOCK_REPORTS = [
    {"id": 1, "title": "User report"},
    {"id": 2, "title": "Admin report"}
]
```

### Правила доступа:
- User → доступ только к разрешённым ресурсам
- Admin → полный доступ

Если доступ запрещён → **403 Forbidden**

---

## 7. Тестовые данные

В системе заранее создан администратор:

```
email: admin@example.com
password: admin123
role: admin
```

Обычные пользователи регистрируются через API.

---
